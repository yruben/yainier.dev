---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero';
import Stats from '../../components/Stats';
import Skills from '../../components/Skills';
import About from '../../components/About';
import Projects from '../../components/Projects';
import { getCollection } from 'astro:content';
import { useTranslations } from '../../i18n/utils';
import { languages } from '../../i18n/ui';
import { siteConfig } from '../../config';

export async function getStaticPaths() {
  return Object.keys(languages).map((lang) => {
      return { params: { lang } };
  });
}

const { lang } = Astro.params;
const t = useTranslations(lang as any);
const typewriterWords = [
    t('hero.word1'),
    t('hero.word2'),
    t('hero.word3'),
    t('hero.word4'),
    t('hero.word5')
];

const allProjects = await getCollection('projects');
const recentProjects = allProjects.slice(0, 3);
---

<BaseLayout title={`Yainier - ${lang === 'es' ? 'Desarrollador Web' : 'Web Developer'}`}>
    <Hero client:load trans={{
        hello: t('hero.hello'),
        subtitlePrefix: t('hero.subtitlePrefix'),
        hire: t('hero.hire'),
        contact: t('hero.contact')
    }} titles={typewriterWords} />
    
    <Stats client:visible trans={{
        years: t('stats.years'),
        projects: t('stats.projects'),
        tech: t('stats.tech'),
        clients: t('stats.clients')
    }} />

    <Skills client:visible title={t('skills.title')} />

    <About client:visible trans={{
        titlePart1: t('about.title.part1'),
        titlePart2: t('about.title.part2'),
        p1: t('about.p1'),
        p2: t('about.p2'),
        cta: t('about.cta')
    }} />

    <Projects projects={recentProjects} client:visible trans={{
        title: t('projects.title'),
        desc: t('projects.desc'),
        viewAll: t('projects.viewAll'),
        details: t('projects.details')
    }} />
    
    <section class="py-20 bg-light-bg dark:bg-navy-900 transition-colors duration-300">
         <div class="container mx-auto px-6 text-center">
             <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">{t('blog.title')}</h2>
              <a href={`/${lang}/blog`} class="text-light-primary dark:text-neon-cyan hover:underline">{t('blog.readMore')} &rarr;</a>
         </div>
    </section>
</BaseLayout>

